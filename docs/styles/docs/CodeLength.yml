extends: script
message: "Make line in code block shorter than 80 characters"
scope: code
level: error
script: |
  text := import("text")
  matches := []
  char_limit := 80 // at most 80 characters per line
  count := 0
  for line in text.split(scope, "\n") {
    if len(line) > char_limit {
      start := text.index(scope, line)
      matches = append(matches, {begin: start, end: start + len(line)})
    }
  }